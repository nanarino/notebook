<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>套接字 socket | notebook</title>
    <meta name="description" content="A VitePress site">
    <meta name="generator" content="VitePress v1.6.3">
    <link rel="preload stylesheet" href="/notebook/assets/style.uKVccVIQ.css" as="style">
    <link rel="preload stylesheet" href="/notebook/vp-icons.css" as="style">
    
    <script type="module" src="/notebook/assets/app._otVaMJL.js"></script>
    <link rel="preload" href="/notebook/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/notebook/assets/chunks/framework.Dv7AZ4b0.js">
    <link rel="modulepreload" href="/notebook/assets/chunks/theme.YigtfgUO.js">
    <link rel="modulepreload" href="/notebook/assets/chunks/katex.ChWnQ-fc.js">
    <link rel="modulepreload" href="/notebook/assets/chunks/c4Diagram-3d4e48cf.DiFVncTa.js">
    <link rel="modulepreload" href="/notebook/assets/chunks/flowDiagram-66a62f08.DSGkkRzX.js">
    <link rel="modulepreload" href="/notebook/assets/chunks/flowDiagram-v2-96b9c2cf.BldbH--m.js">
    <link rel="modulepreload" href="/notebook/assets/chunks/erDiagram-9861fffd.-iSXJHpK.js">
    <link rel="modulepreload" href="/notebook/assets/chunks/gitGraphDiagram-72cf32ee.DswcMJQM.js">
    <link rel="modulepreload" href="/notebook/assets/chunks/ganttDiagram-c361ad54.2kpOetzv.js">
    <link rel="modulepreload" href="/notebook/assets/chunks/infoDiagram-f8f76790.B55czp2M.js">
    <link rel="modulepreload" href="/notebook/assets/chunks/pieDiagram-8a3498a8.Dxe-e85p.js">
    <link rel="modulepreload" href="/notebook/assets/chunks/quadrantDiagram-120e2f19.DVE6TzHt.js">
    <link rel="modulepreload" href="/notebook/assets/chunks/xychartDiagram-e933f94c.DLWrD37h.js">
    <link rel="modulepreload" href="/notebook/assets/chunks/requirementDiagram-deff3bca.ClsPBAF0.js">
    <link rel="modulepreload" href="/notebook/assets/chunks/sequenceDiagram-704730f1.BEMfTzFP.js">
    <link rel="modulepreload" href="/notebook/assets/chunks/classDiagram-70f12bd4.DoBjpDS4.js">
    <link rel="modulepreload" href="/notebook/assets/chunks/classDiagram-v2-f2320105.Dgp8ecxo.js">
    <link rel="modulepreload" href="/notebook/assets/chunks/stateDiagram-587899a1.DBK6KInQ.js">
    <link rel="modulepreload" href="/notebook/assets/chunks/stateDiagram-v2-d93cdb3a.DJ8gm7xU.js">
    <link rel="modulepreload" href="/notebook/assets/chunks/journeyDiagram-49397b02.C1t4YC7n.js">
    <link rel="modulepreload" href="/notebook/assets/chunks/flowchart-elk-definition-4a651766.DL7UPDat.js">
    <link rel="modulepreload" href="/notebook/assets/chunks/timeline-definition-85554ec2.CDgyG0BD.js">
    <link rel="modulepreload" href="/notebook/assets/chunks/mindmap-definition-fc14e90a.DPBDgFCY.js">
    <link rel="modulepreload" href="/notebook/assets/chunks/sankeyDiagram-04a897e0.D6wJquQq.js">
    <link rel="modulepreload" href="/notebook/assets/chunks/blockDiagram-38ab4fdb.CEMsXAHH.js">
    <link rel="modulepreload" href="/notebook/assets/chunks/virtual_mermaid-config.DDnGl6nM.js">
    <link rel="modulepreload" href="/notebook/assets/python_5-并发编程_27-套接字socket.md.s_W_qZIz.lean.js">
    <link rel="icon" href="/notebook/favicon.png">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-bb82df63><!--[--><!--]--><!--[--><span tabindex="-1" data-v-58efaeb7></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-58efaeb7>Skip to content</a><!--]--><!----><header class="VPNav" data-v-bb82df63 data-v-2ab96cb7><div class="VPNavBar" data-v-2ab96cb7 data-v-07aeb260><div class="wrapper" data-v-07aeb260><div class="container" data-v-07aeb260><div class="title" data-v-07aeb260><div class="VPNavBarTitle has-sidebar" data-v-07aeb260 data-v-f9cd77fa><a class="title" href="/notebook/" data-v-f9cd77fa><!--[--><!--]--><!--[--><img class="VPImage logo" src="/notebook/favicon.png" alt data-v-1af4a3b5><!--]--><span data-v-f9cd77fa>notebook</span><!--[--><!--]--></a></div></div><div class="content" data-v-07aeb260><div class="content-body" data-v-07aeb260><!--[--><!--]--><div class="VPNavBarSearch search" data-v-07aeb260><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-07aeb260 data-v-02e73556><span id="main-nav-aria-label" class="visually-hidden" data-v-02e73556> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/notebook/javascript/" tabindex="0" data-v-02e73556 data-v-aefa0e46><!--[--><span data-v-aefa0e46>JavaScript</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink active" href="/notebook/python/" tabindex="0" data-v-02e73556 data-v-aefa0e46><!--[--><span data-v-aefa0e46>Python</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-07aeb260 data-v-1650f305><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-1650f305 data-v-902beddc data-v-e375f1cb><span class="check" data-v-e375f1cb><span class="icon" data-v-e375f1cb><!--[--><span class="vpi-sun sun" data-v-902beddc></span><span class="vpi-moon moon" data-v-902beddc></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-07aeb260 data-v-a64909eb data-v-e8b0f27a><!--[--><a class="VPSocialLink no-icon" href="https://github.com/nanarino" aria-label="github" target="_blank" rel="noopener" data-v-e8b0f27a data-v-3b60c8d6><span class="vpi-social-github"></span></a><a class="VPSocialLink no-icon" href="https://twitter.com/kogawananari" aria-label="twitter" target="_blank" rel="noopener" data-v-e8b0f27a data-v-3b60c8d6><span class="vpi-social-twitter"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-07aeb260 data-v-70bf112b data-v-cd6f08d3><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-cd6f08d3><span class="vpi-more-horizontal icon" data-v-cd6f08d3></span></button><div class="menu" data-v-cd6f08d3><div class="VPMenu" data-v-cd6f08d3 data-v-be747e2b><!----><!--[--><!--[--><!----><div class="group" data-v-70bf112b><div class="item appearance" data-v-70bf112b><p class="label" data-v-70bf112b>Appearance</p><div class="appearance-action" data-v-70bf112b><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-70bf112b data-v-902beddc data-v-e375f1cb><span class="check" data-v-e375f1cb><span class="icon" data-v-e375f1cb><!--[--><span class="vpi-sun sun" data-v-902beddc></span><span class="vpi-moon moon" data-v-902beddc></span><!--]--></span></span></button></div></div></div><div class="group" data-v-70bf112b><div class="item social-links" data-v-70bf112b><div class="VPSocialLinks social-links-list" data-v-70bf112b data-v-e8b0f27a><!--[--><a class="VPSocialLink no-icon" href="https://github.com/nanarino" aria-label="github" target="_blank" rel="noopener" data-v-e8b0f27a data-v-3b60c8d6><span class="vpi-social-github"></span></a><a class="VPSocialLink no-icon" href="https://twitter.com/kogawananari" aria-label="twitter" target="_blank" rel="noopener" data-v-e8b0f27a data-v-3b60c8d6><span class="vpi-social-twitter"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-07aeb260 data-v-49bdfaa5><span class="container" data-v-49bdfaa5><span class="top" data-v-49bdfaa5></span><span class="middle" data-v-49bdfaa5></span><span class="bottom" data-v-49bdfaa5></span></span></button></div></div></div></div><div class="divider" data-v-07aeb260><div class="divider-line" data-v-07aeb260></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-bb82df63 data-v-8cd9eb56><div class="container" data-v-8cd9eb56><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-8cd9eb56><span class="vpi-align-left menu-icon" data-v-8cd9eb56></span><span class="menu-text" data-v-8cd9eb56>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-8cd9eb56 data-v-311f88e4><button data-v-311f88e4>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-bb82df63 data-v-f6277976><div class="curtain" data-v-f6277976></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-f6277976><span class="visually-hidden" id="sidebar-aria-label" data-v-f6277976> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-851ec56a><section class="VPSidebarItem level-0" data-v-851ec56a data-v-b43f743a><div class="item" role="button" tabindex="0" data-v-b43f743a><div class="indicator" data-v-b43f743a></div><h2 class="text" data-v-b43f743a>起步</h2><!----></div><div class="items" data-v-b43f743a><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b43f743a data-v-b43f743a><div class="item" data-v-b43f743a><div class="indicator" data-v-b43f743a></div><a class="VPLink link link" href="/notebook/python/" data-v-b43f743a><!--[--><p class="text" data-v-b43f743a>𝟶﹒准备环境</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b43f743a data-v-b43f743a><div class="item" data-v-b43f743a><div class="indicator" data-v-b43f743a></div><a class="VPLink link link" href="/notebook/python/0-%E8%B5%B7%E6%AD%A5/1-%E5%88%9D%E8%AF%86python.html" data-v-b43f743a><!--[--><p class="text" data-v-b43f743a>𝟷﹒初识python</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b43f743a data-v-b43f743a><div class="item" data-v-b43f743a><div class="indicator" data-v-b43f743a></div><a class="VPLink link link" href="/notebook/python/0-%E8%B5%B7%E6%AD%A5/2-%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6.html" data-v-b43f743a><!--[--><p class="text" data-v-b43f743a>𝟸﹒流程控制</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b43f743a data-v-b43f743a><div class="item" data-v-b43f743a><div class="indicator" data-v-b43f743a></div><a class="VPLink link link" href="/notebook/python/0-%E8%B5%B7%E6%AD%A5/3-%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86.html" data-v-b43f743a><!--[--><p class="text" data-v-b43f743a>𝟹﹒异常处理</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-851ec56a><section class="VPSidebarItem level-0" data-v-851ec56a data-v-b43f743a><div class="item" role="button" tabindex="0" data-v-b43f743a><div class="indicator" data-v-b43f743a></div><h2 class="text" data-v-b43f743a>数据类型</h2><!----></div><div class="items" data-v-b43f743a><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b43f743a data-v-b43f743a><div class="item" data-v-b43f743a><div class="indicator" data-v-b43f743a></div><a class="VPLink link link" href="/notebook/python/1-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/4-%E6%95%B0%E5%AD%97%E5%92%8C%E5%AD%97%E7%AC%A6%E4%B8%B2.html" data-v-b43f743a><!--[--><p class="text" data-v-b43f743a>𝟺﹒数字和字符串</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b43f743a data-v-b43f743a><div class="item" data-v-b43f743a><div class="indicator" data-v-b43f743a></div><a class="VPLink link link" href="/notebook/python/1-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/5-%E5%88%97%E8%A1%A8%E5%92%8C%E5%85%83%E7%BB%84.html" data-v-b43f743a><!--[--><p class="text" data-v-b43f743a>𝟻﹒列表和元组</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b43f743a data-v-b43f743a><div class="item" data-v-b43f743a><div class="indicator" data-v-b43f743a></div><a class="VPLink link link" href="/notebook/python/1-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/6-%E5%AD%97%E5%85%B8%E5%92%8C%E9%9B%86%E5%90%88.html" data-v-b43f743a><!--[--><p class="text" data-v-b43f743a>𝟼﹒字典和集合</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b43f743a data-v-b43f743a><div class="item" data-v-b43f743a><div class="indicator" data-v-b43f743a></div><a class="VPLink link link" href="/notebook/python/1-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/7-%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%A0%BC%E5%BC%8F%E5%8C%96.html" data-v-b43f743a><!--[--><p class="text" data-v-b43f743a>𝟽﹒字符串格式化</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b43f743a data-v-b43f743a><div class="item" data-v-b43f743a><div class="indicator" data-v-b43f743a></div><a class="VPLink link link" href="/notebook/python/1-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/8-%E4%B8%89%E7%9B%AE%E5%92%8C%E6%8E%A8%E5%AF%BC%E5%BC%8F.html" data-v-b43f743a><!--[--><p class="text" data-v-b43f743a>𝟾﹒三目和推导式</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b43f743a data-v-b43f743a><div class="item" data-v-b43f743a><div class="indicator" data-v-b43f743a></div><a class="VPLink link link" href="/notebook/python/1-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/9-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E6%8B%93%E5%B1%95.html" data-v-b43f743a><!--[--><p class="text" data-v-b43f743a>𝟿﹒数据类型拓展</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-851ec56a><section class="VPSidebarItem level-0" data-v-851ec56a data-v-b43f743a><div class="item" role="button" tabindex="0" data-v-b43f743a><div class="indicator" data-v-b43f743a></div><h2 class="text" data-v-b43f743a>函数</h2><!----></div><div class="items" data-v-b43f743a><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b43f743a data-v-b43f743a><div class="item" data-v-b43f743a><div class="indicator" data-v-b43f743a></div><a class="VPLink link link" href="/notebook/python/2-%E5%87%BD%E6%95%B0/10-%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86.html" data-v-b43f743a><!--[--><p class="text" data-v-b43f743a>𝟷𝟶﹒文件处理</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b43f743a data-v-b43f743a><div class="item" data-v-b43f743a><div class="indicator" data-v-b43f743a></div><a class="VPLink link link" href="/notebook/python/2-%E5%87%BD%E6%95%B0/11-%E6%97%A5%E5%BF%97%E5%A4%84%E7%90%86.html" data-v-b43f743a><!--[--><p class="text" data-v-b43f743a>𝟷𝟷﹒日志处理</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b43f743a data-v-b43f743a><div class="item" data-v-b43f743a><div class="indicator" data-v-b43f743a></div><a class="VPLink link link" href="/notebook/python/2-%E5%87%BD%E6%95%B0/12-%E5%86%85%E7%BD%AE%E5%87%BD%E6%95%B0.html" data-v-b43f743a><!--[--><p class="text" data-v-b43f743a>𝟷𝟸﹒内置函数</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b43f743a data-v-b43f743a><div class="item" data-v-b43f743a><div class="indicator" data-v-b43f743a></div><a class="VPLink link link" href="/notebook/python/2-%E5%87%BD%E6%95%B0/13-%E9%97%AD%E5%8C%85%E5%92%8C%E8%A3%85%E9%A5%B0%E5%99%A8.html" data-v-b43f743a><!--[--><p class="text" data-v-b43f743a>𝟷𝟹﹒闭包和装饰器</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b43f743a data-v-b43f743a><div class="item" data-v-b43f743a><div class="indicator" data-v-b43f743a></div><a class="VPLink link link" href="/notebook/python/2-%E5%87%BD%E6%95%B0/14-%E9%80%92%E5%BD%92%E5%92%8C%E6%B7%B1%E6%8B%B7%E8%B4%9D.html" data-v-b43f743a><!--[--><p class="text" data-v-b43f743a>𝟷𝟺﹒递归和深拷贝</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b43f743a data-v-b43f743a><div class="item" data-v-b43f743a><div class="indicator" data-v-b43f743a></div><a class="VPLink link link" href="/notebook/python/2-%E5%87%BD%E6%95%B0/15-%E8%BF%AD%E4%BB%A3%E5%99%A8%E5%92%8C%E7%94%9F%E6%88%90%E5%99%A8.html" data-v-b43f743a><!--[--><p class="text" data-v-b43f743a>𝟷𝟻﹒迭代器和生成器</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-851ec56a><section class="VPSidebarItem level-0" data-v-851ec56a data-v-b43f743a><div class="item" role="button" tabindex="0" data-v-b43f743a><div class="indicator" data-v-b43f743a></div><h2 class="text" data-v-b43f743a>面向对象</h2><!----></div><div class="items" data-v-b43f743a><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b43f743a data-v-b43f743a><div class="item" data-v-b43f743a><div class="indicator" data-v-b43f743a></div><a class="VPLink link link" href="/notebook/python/3-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/16-%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1.html" data-v-b43f743a><!--[--><p class="text" data-v-b43f743a>𝟷𝟼﹒类和对象</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b43f743a data-v-b43f743a><div class="item" data-v-b43f743a><div class="indicator" data-v-b43f743a></div><a class="VPLink link link" href="/notebook/python/3-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/17-%E5%B0%81%E8%A3%85%E5%92%8C%E7%BB%A7%E6%89%BF.html" data-v-b43f743a><!--[--><p class="text" data-v-b43f743a>𝟷𝟽﹒封装和继承</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b43f743a data-v-b43f743a><div class="item" data-v-b43f743a><div class="indicator" data-v-b43f743a></div><a class="VPLink link link" href="/notebook/python/3-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/18-%E9%AD%94%E6%9C%AF%E6%96%B9%E6%B3%95.html" data-v-b43f743a><!--[--><p class="text" data-v-b43f743a>𝟷𝟾﹒魔术方法</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b43f743a data-v-b43f743a><div class="item" data-v-b43f743a><div class="indicator" data-v-b43f743a></div><a class="VPLink link link" href="/notebook/python/3-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/19-%E5%A4%9A%E6%80%81%E5%92%8C%E6%B3%9B%E5%9E%8B.html" data-v-b43f743a><!--[--><p class="text" data-v-b43f743a>𝟷𝟿﹒多态和泛型</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b43f743a data-v-b43f743a><div class="item" data-v-b43f743a><div class="indicator" data-v-b43f743a></div><a class="VPLink link link" href="/notebook/python/3-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/20-%E6%A8%A1%E5%9D%97%E5%92%8C%E5%8C%85.html" data-v-b43f743a><!--[--><p class="text" data-v-b43f743a>𝟸𝟶﹒模块和包</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-851ec56a><section class="VPSidebarItem level-0" data-v-851ec56a data-v-b43f743a><div class="item" role="button" tabindex="0" data-v-b43f743a><div class="indicator" data-v-b43f743a></div><h2 class="text" data-v-b43f743a>常用模块</h2><!----></div><div class="items" data-v-b43f743a><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b43f743a data-v-b43f743a><div class="item" data-v-b43f743a><div class="indicator" data-v-b43f743a></div><a class="VPLink link link" href="/notebook/python/4-%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/21-%E5%8A%A0%E5%AF%86%E6%9C%89%E5%85%B3%E6%A8%A1%E5%9D%97.html" data-v-b43f743a><!--[--><p class="text" data-v-b43f743a>𝟸𝟷﹒加密有关模块</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b43f743a data-v-b43f743a><div class="item" data-v-b43f743a><div class="indicator" data-v-b43f743a></div><a class="VPLink link link" href="/notebook/python/4-%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/22-%E5%BA%8F%E5%88%97%E5%8C%96%E6%9C%89%E5%85%B3%E6%A8%A1%E5%9D%97.html" data-v-b43f743a><!--[--><p class="text" data-v-b43f743a>𝟸𝟸﹒序列化有关模块</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b43f743a data-v-b43f743a><div class="item" data-v-b43f743a><div class="indicator" data-v-b43f743a></div><a class="VPLink link link" href="/notebook/python/4-%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/23-%E6%AD%A3%E5%88%99%E6%9C%89%E5%85%B3%E6%A8%A1%E5%9D%97.html" data-v-b43f743a><!--[--><p class="text" data-v-b43f743a>𝟸𝟹﹒正则有关模块</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b43f743a data-v-b43f743a><div class="item" data-v-b43f743a><div class="indicator" data-v-b43f743a></div><a class="VPLink link link" href="/notebook/python/4-%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/24-%E6%97%B6%E9%97%B4%E6%9C%89%E5%85%B3%E6%A8%A1%E5%9D%97.html" data-v-b43f743a><!--[--><p class="text" data-v-b43f743a>𝟸𝟺﹒时间有关模块</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b43f743a data-v-b43f743a><div class="item" data-v-b43f743a><div class="indicator" data-v-b43f743a></div><a class="VPLink link link" href="/notebook/python/4-%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/25-%E6%95%B0%E5%AD%A6%E6%9C%89%E5%85%B3%E6%A8%A1%E5%9D%97.html" data-v-b43f743a><!--[--><p class="text" data-v-b43f743a>𝟸𝟻﹒数学有关模块</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-851ec56a><section class="VPSidebarItem level-0 has-active" data-v-851ec56a data-v-b43f743a><div class="item" role="button" tabindex="0" data-v-b43f743a><div class="indicator" data-v-b43f743a></div><h2 class="text" data-v-b43f743a>并发编程</h2><!----></div><div class="items" data-v-b43f743a><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b43f743a data-v-b43f743a><div class="item" data-v-b43f743a><div class="indicator" data-v-b43f743a></div><a class="VPLink link link" href="/notebook/python/5-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/26-%E7%B3%BB%E7%BB%9F%E6%9C%89%E5%85%B3%E6%A8%A1%E5%9D%97.html" data-v-b43f743a><!--[--><p class="text" data-v-b43f743a>𝟸𝟼﹒系统有关模块</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b43f743a data-v-b43f743a><div class="item" data-v-b43f743a><div class="indicator" data-v-b43f743a></div><a class="VPLink link link" href="/notebook/python/5-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/27-%E5%A5%97%E6%8E%A5%E5%AD%97socket.html" data-v-b43f743a><!--[--><p class="text" data-v-b43f743a>𝟸𝟽﹒套接字socket</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b43f743a data-v-b43f743a><div class="item" data-v-b43f743a><div class="indicator" data-v-b43f743a></div><a class="VPLink link link" href="/notebook/python/5-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/28-%E8%BF%9B%E7%A8%8B.html" data-v-b43f743a><!--[--><p class="text" data-v-b43f743a>𝟸𝟾﹒进程</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b43f743a data-v-b43f743a><div class="item" data-v-b43f743a><div class="indicator" data-v-b43f743a></div><a class="VPLink link link" href="/notebook/python/5-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/29-%E7%BA%BF%E7%A8%8B.html" data-v-b43f743a><!--[--><p class="text" data-v-b43f743a>𝟸𝟿﹒线程</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b43f743a data-v-b43f743a><div class="item" data-v-b43f743a><div class="indicator" data-v-b43f743a></div><a class="VPLink link link" href="/notebook/python/5-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/30-%E5%8D%8F%E7%A8%8B.html" data-v-b43f743a><!--[--><p class="text" data-v-b43f743a>𝟹𝟶﹒协程</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-851ec56a><section class="VPSidebarItem level-0" data-v-851ec56a data-v-b43f743a><div class="item" role="button" tabindex="0" data-v-b43f743a><div class="indicator" data-v-b43f743a></div><h2 class="text" data-v-b43f743a>WEB相关</h2><!----></div><div class="items" data-v-b43f743a><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b43f743a data-v-b43f743a><div class="item" data-v-b43f743a><div class="indicator" data-v-b43f743a></div><a class="VPLink link link" href="/notebook/python/6-WEB%E7%9B%B8%E5%85%B3/31-SQL%E5%92%8CORM.html" data-v-b43f743a><!--[--><p class="text" data-v-b43f743a>𝟹𝟷﹒SQL和ORM</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b43f743a data-v-b43f743a><div class="item" data-v-b43f743a><div class="indicator" data-v-b43f743a></div><a class="VPLink link link" href="/notebook/python/6-WEB%E7%9B%B8%E5%85%B3/32-FastAPI.html" data-v-b43f743a><!--[--><p class="text" data-v-b43f743a>𝟹𝟸﹒FastAPI</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-851ec56a><section class="VPSidebarItem level-0" data-v-851ec56a data-v-b43f743a><!----><div class="items" data-v-b43f743a><!--[--><div class="VPSidebarItem level-1" data-v-b43f743a data-v-b43f743a><!----><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-bb82df63 data-v-c87fc2aa><div class="VPDoc has-sidebar has-aside" data-v-c87fc2aa data-v-4c7315e0><!--[--><!--]--><div class="container" data-v-4c7315e0><div class="aside" data-v-4c7315e0><div class="aside-curtain" data-v-4c7315e0></div><div class="aside-container" data-v-4c7315e0><div class="aside-content" data-v-4c7315e0><div class="VPDocAside" data-v-4c7315e0 data-v-c398666c><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-c398666c data-v-f1a8c8aa><div class="content" data-v-f1a8c8aa><div class="outline-marker" data-v-f1a8c8aa></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-f1a8c8aa>On this page</div><ul class="VPDocOutlineItem root" data-v-f1a8c8aa data-v-0ddb554b><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-c398666c></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-4c7315e0><div class="content-container" data-v-4c7315e0><!--[--><!--]--><main class="main" data-v-4c7315e0><div style="position:relative;" class="vp-doc _notebook_python_5-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B_27-%E5%A5%97%E6%8E%A5%E5%AD%97socket" data-v-4c7315e0><div><h1 id="套接字-socket" tabindex="-1">套接字 socket <a class="header-anchor" href="#套接字-socket" aria-label="Permalink to &quot;套接字 socket&quot;">​</a></h1><blockquote><p>套接字起源于 20 世纪 70 年代加利福尼亚大学伯克利分校版本的 Unix,即人们所说的 BSD Unix。 因此,有时人们也把套接字称为“伯克利套接字”或“BSD 套接字”。一开始,套接字被设计用在同 一台主机上多个应用程序之间的通讯。这也被称进程间通讯或 IPC。</p></blockquote><h2 id="socket-模块" tabindex="-1">socket 模块 <a class="header-anchor" href="#socket-模块" aria-label="Permalink to &quot;socket 模块&quot;">​</a></h2><p><a href="https://docs.python.org/zh-cn/3/library/socket.html" target="_blank" rel="noreferrer"><code>socket</code></a>模块提供了访问 BSD 套接字的接口</p><h3 id="创建套接字" tabindex="-1">创建套接字 <a class="header-anchor" href="#创建套接字" aria-label="Permalink to &quot;创建套接字&quot;">​</a></h3><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> socket</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">s </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> socket.socket()</span></span></code></pre></div><h4 id="参数" tabindex="-1">参数 <a class="header-anchor" href="#参数" aria-label="Permalink to &quot;参数&quot;">​</a></h4><ul><li>AF_INET 面向网络的套接字（默认种族）</li><li>AF_UNIX 基于文件的套接字</li><li>TCP 套接字的名 SOCK_STREAM（默认类型）</li><li>UDP 套接字的名 SOCK_DGRAM</li></ul><table tabindex="0"><thead><tr><th>常用方法</th><th></th></tr></thead><tbody><tr><td><code>s.bind()</code></td><td>绑定(主机,端口号)到套接字</td></tr><tr><td><code>s.listen()</code></td><td>开始 TCP 监听</td></tr><tr><td><code>s.accept()</code></td><td>被动接受 TCP 客户的连接,(阻塞式)等待连接的到来</td></tr><tr><td><code>s.connect()</code></td><td>主动初始化 TCP 服务器连接</td></tr><tr><td><code>s.connect_ex()</code></td><td><code>connect()</code>函数的扩展版本,出错时返回出错码,而不是抛出异常</td></tr><tr><td><code>s.recv()</code></td><td>#接收 TCP 数据</td></tr><tr><td><code>s.send()</code></td><td>#发送 TCP 数据</td></tr><tr><td><code>s.sendall()</code></td><td>#发送 TCP 数据</td></tr><tr><td><code>s.recvfrom()</code></td><td>#接收 UDP 数据</td></tr><tr><td><code>s.sendto()</code></td><td>#发送 UDP 数据</td></tr><tr><td><code>s.getpeername()</code></td><td>#连接到当前套接字的远端的地址</td></tr><tr><td><code>s.getsockname()</code></td><td>#当前套接字的地址</td></tr><tr><td><code>s.getsockopt()</code></td><td>#返回指定套接字的参数</td></tr><tr><td><code>s.setsockopt()</code></td><td>#设置指定套接字的参数</td></tr><tr><td><code>s.close()</code></td><td>#关闭套接字，也支持 with 上下文管理<code>socket.socket()</code></td></tr></tbody></table><h3 id="基于-tcp-协议的-socket" tabindex="-1">基于 TCP 协议的 socket <a class="header-anchor" href="#基于-tcp-协议的-socket" aria-label="Permalink to &quot;基于 TCP 协议的 socket&quot;">​</a></h3><h4 id="server-端" tabindex="-1">server 端 <a class="header-anchor" href="#server-端" aria-label="Permalink to &quot;server 端&quot;">​</a></h4><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> socket</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sk </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> socket.socket()  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 即socket.socket(socket.AF_INET,socket.SOCK_STREAM)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sk.bind((</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;127.0.0.1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8898</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 把地址绑定到套接字</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sk.listen()  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 监听链接</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">conn, addr </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sk.accept()  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 接受客户端链接 会和input一样一直等待连接</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ret </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> conn.recv(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1024</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 接收客户端信息 会和input一样一直等待着信</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ret)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 打印客户端信息</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">conn.send(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">b</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;hi&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 向客户端发送信息</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">conn.close()  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 关闭客户端套接字</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sk.close()  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 关闭服务器套接字(可选)</span></span></code></pre></div><h4 id="client-端" tabindex="-1">client 端 <a class="header-anchor" href="#client-端" aria-label="Permalink to &quot;client 端&quot;">​</a></h4><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> socket</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sk </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> socket.socket()  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 创建客户套接字</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sk.connect((</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;127.0.0.1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8898</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 尝试连接服务器</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sk.send(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">b</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;hello!&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ret </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sk.recv(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1024</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 对话(发送/接收)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ret)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sk.close()  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 关闭客户套接字</span></span></code></pre></div><h3 id="常见报错" tabindex="-1">常见报错 <a class="header-anchor" href="#常见报错" aria-label="Permalink to &quot;常见报错&quot;">​</a></h3><div class="danger custom-block"><p class="custom-block-title">Traceback(most recent call last):</p><p>OSError: [Error 48] Address already in use</p></div><p>解决方法： 加入一条 socket 配置，重用 ip 和端口</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> socket</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> socket </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> SOL_SOCKET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SO_REUSEADDR</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sk </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> socket.socket()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sk.setsockopt(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SOL_SOCKET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SO_REUSEADDR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 就是它，在bind前加</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sk.bind((</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;127.0.0.1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8898</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sk.listen()</span></span></code></pre></div><div class="danger custom-block"><p class="custom-block-title">Traceback(most recent call last):</p><p>ConnectionRefusedError: [WinError 10061] 由于目标计算机积极拒绝，无法连接。</p></div><p>解决方法： 修改防火墙设置或者换一个端口号</p><h3 id="基于-udp-协议的-socket" tabindex="-1">基于 UDP 协议的 socket <a class="header-anchor" href="#基于-udp-协议的-socket" aria-label="Permalink to &quot;基于 UDP 协议的 socket&quot;">​</a></h3><p>udp 无需监听和建立连接。</p><p>udp 收发消息会分别接收和发送对方的地址（addr）。</p><h4 id="server-端-1" tabindex="-1">server 端 <a class="header-anchor" href="#server-端-1" aria-label="Permalink to &quot;server 端&quot;">​</a></h4><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> socket</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">udp_sk </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> socket.socket(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">socket.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SOCK_DGRAM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 创建一个服务器的套接字</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">udp_sk.bind((</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;127.0.0.1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">9000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 绑定服务器套接字</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">msg, addr </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> udp_sk.recvfrom(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1024</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(msg)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">udp_sk.sendto(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">b</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;hi&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, addr)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 对话(接收与发送)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">udp_sk.close()  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 关闭服务器套接字</span></span></code></pre></div><h4 id="client-端-1" tabindex="-1">client 端 <a class="header-anchor" href="#client-端-1" aria-label="Permalink to &quot;client 端&quot;">​</a></h4><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> socket</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ip_port </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;127.0.0.1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">9000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">udp_sk </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> socket.socket(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">socket.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SOCK_DGRAM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">udp_sk.sendto(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">b</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;hello&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, ip_port)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">back_msg, addr </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> udp_sk.recvfrom(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1024</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(back_msg.decode(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;utf-8&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), addr)</span></span></code></pre></div><h3 id="更多方法介绍" tabindex="-1">更多方法介绍 <a class="header-anchor" href="#更多方法介绍" aria-label="Permalink to &quot;更多方法介绍&quot;">​</a></h3><ul><li><p>面向锁</p><table tabindex="0"><thead><tr><th><code>s.setblocking()</code></th><th>设置套接字的阻塞与非阻塞模式</th></tr></thead><tbody><tr><td><code>s.settimeout()</code></td><td>设置阻塞套接字操作的超时时间</td></tr><tr><td><code>s.gettimeout()</code></td><td>得到阻塞套接字操作的超时时间</td></tr></tbody></table></li><li><p>面向文件</p><table tabindex="0"><thead><tr><th><code>s.fileno()</code></th><th>套接字的文件描述符</th></tr></thead><tbody><tr><td><code>s.makefile()</code></td><td>创建一个与该套接字相关的文件</td></tr></tbody></table></li></ul><p>官方文档对 socket 模块下的<code>socket.send()</code>和<code>socket.sendall()</code>解释如下：</p><h4 id="socket-send-string-flags" tabindex="-1"><code>socket.send(string[, flags])</code> <a class="header-anchor" href="#socket-send-string-flags" aria-label="Permalink to &quot;`socket.send(string[, flags])`&quot;">​</a></h4><blockquote><p>Send data to the socket. The socket must be connected to a remote socket. The optional flags argument has the same meaning as for recv() above. Returns the number of bytes sent. Applications are responsible for checking that all data has been sent; if only some of the data was transmitted, the application needs to attempt delivery of the remaining data. send()的返回值是发送的字节数量，这个数量值可能小于要发送的 string 的字节数， 也就是说可能无法发送 string 中所有的数据。如果有错误则会抛出异常。</p></blockquote><h4 id="socket-sendall-string-flags" tabindex="-1"><code>socket.sendall(string[, flags])</code> <a class="header-anchor" href="#socket-sendall-string-flags" aria-label="Permalink to &quot;`socket.sendall(string[, flags])`&quot;">​</a></h4><blockquote><p>Send data to the socket. The socket must be connected to a remote socket. The optional flags argument has the same meaning as for recv() above. Unlike send(), this method continues to send data from string until either all data has been sent or an error occurs. None is returned on success. On error, an exception is raised, and there is no way to determine how much data, if any, was successfully sent. 尝试发送 string 的所有数据，成功则返回 None，失败则抛出异常。</p></blockquote><p>故，下面两段代码是等价的：</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sock.sendall(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Hello world</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">buffer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Hello world</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> buffer:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    _bytes </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sock.send(buffer)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    buffer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> buffer[_bytes:]</span></span></code></pre></div><h2 id="socketserver-模块" tabindex="-1">socketserver 模块 <a class="header-anchor" href="#socketserver-模块" aria-label="Permalink to &quot;socketserver 模块&quot;">​</a></h2><p><a href="https://docs.python.org/zh-cn/3/library/socketserver.html" target="_blank" rel="noreferrer"><code>socketserver</code></a> 模块使一个 server 端可以同时和多个 client 端连接（多线程）</p><p>与只使用 socket 时<code>conn,addr = sk.accept()</code>相同的是<br> 继承<code>socketserver.BaseRequestHandler</code>之后<br><code>self.request</code> 就相当于 conn<br><code>self.client_address</code> 就相当于 addr</p><h3 id="server-端-2" tabindex="-1">server 端 <a class="header-anchor" href="#server-端-2" aria-label="Permalink to &quot;server 端&quot;">​</a></h3><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> socketserver</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Myserver</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">socketserver</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">BaseRequestHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> handle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.request.recv(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1024</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).strip()</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> wrote:&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.format(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.client_address[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]))</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.data)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.request.sendall(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.data.upper())</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> __name__</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;__main__&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    HOST</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">PORT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;127.0.0.1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">9999</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 设置allow_reuse_address允许服务器重用地址</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    socketserver.TCPServer.allow_reuse_address </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> True</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 创建一个server, 将服务地址绑定到127.0.0.1:9999</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    server </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> socketserver.TCPServer((</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">HOST</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">PORT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), Myserver)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 让server永远运行下去，除非强制停止程序</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    server.serve_forever()</span></span></code></pre></div><h3 id="client-端-2" tabindex="-1">client 端 <a class="header-anchor" href="#client-端-2" aria-label="Permalink to &quot;client 端&quot;">​</a></h3><p>就是最前面的基于 TCP 的套接字的 C 端，这里使用 with 上下文管理的写法</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> socket</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">HOST</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">PORT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;127.0.0.1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">9999</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;hello&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> socket.socket(socket.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AF_INET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, socket.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SOCK_STREAM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sock:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    sock.connect((</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">HOST</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">PORT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    sock.sendall(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">bytes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;utf-8&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    received </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(sock.recv(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1024</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;utf-8&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Sent:     </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.format(data))</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Received: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.format(received))</span></span></code></pre></div><h2 id="黏包" tabindex="-1">黏包 <a class="header-anchor" href="#黏包" aria-label="Permalink to &quot;黏包&quot;">​</a></h2><p>现象 : 同时执行多条命令之后，得到的结果很可能只有一部分，在执行其他命令的时候又接收到之前执行的另外一部分结果，这种显现就是黏包。</p><h3 id="黏包成因" tabindex="-1">黏包成因 <a class="header-anchor" href="#黏包成因" aria-label="Permalink to &quot;黏包成因&quot;">​</a></h3><ul><li><p>TCP 协议的拆包机制<br> 当发送端缓冲区的长度大于网卡的 MTU 时 TCP 会将这次发送的数据拆成几个数据包发送出去。</p></li><li><p>面向流的通信特点和 Nagle 算法<br> Nagle 算法优化后将多次间隔较小且数据量小的数据，合并成一个大的数据块，然后进行封包。</p></li></ul><div class="mermaid"></div><h3 id="解决方案" tabindex="-1">解决方案 <a class="header-anchor" href="#解决方案" aria-label="Permalink to &quot;解决方案&quot;">​</a></h3><p>思路：制作报头，提前让接收端知晓自己将要发送的字节流总大小</p><p>让发送端在发送数据前，发送<strong>固定长度</strong>的报头，然后接收端循环接收完所有数据。</p><h2 id="struct-模块" tabindex="-1">struct 模块 <a class="header-anchor" href="#struct-模块" aria-label="Permalink to &quot;struct 模块&quot;">​</a></h2><p><a href="https://docs.python.org/zh-cn/3/library/struct.html" target="_blank" rel="noreferrer"><code>struct</code></a>可以把以下类型转成固定长度的 bytes</p><table tabindex="0"><thead><tr><th>Format</th><th>C Type</th><th>Python type</th><th>Standard size</th><th>Notes</th></tr></thead><tbody><tr><td>x</td><td>pad byte</td><td>no value</td><td></td><td></td></tr><tr><td>c</td><td>char</td><td>string of length 1</td><td>1</td><td></td></tr><tr><td>b</td><td>signed char</td><td>integer</td><td>1</td><td>(3)</td></tr><tr><td>B</td><td>unsigned char</td><td>integer</td><td>1</td><td>(3)</td></tr><tr><td>?</td><td>_Bool</td><td>bool</td><td>1</td><td>(1)</td></tr><tr><td>h</td><td>short</td><td>integer</td><td>2</td><td>(3)</td></tr><tr><td>H</td><td>unsigned short</td><td>integer</td><td>2</td><td>(3)</td></tr><tr><td>i</td><td>int</td><td>integer</td><td>4</td><td>(3)</td></tr><tr><td>I</td><td>unsigned int</td><td>integer</td><td>4</td><td>(3)</td></tr><tr><td>l</td><td>long</td><td>integer</td><td>4</td><td>(3)</td></tr><tr><td>L</td><td>unsigned long</td><td>integer</td><td>4</td><td>(3)</td></tr><tr><td>q</td><td>long long</td><td>integer</td><td>8</td><td>(2)(3)</td></tr><tr><td>Q</td><td>unsigned long long</td><td>integer</td><td>8</td><td>(2)(3)</td></tr><tr><td>f</td><td>float</td><td>float</td><td>4</td><td>(4)</td></tr><tr><td>d</td><td>double</td><td>float</td><td>8</td><td>(4)</td></tr><tr><td>s</td><td>char[]</td><td>string</td><td></td><td></td></tr><tr><td>P</td><td>char[]</td><td>string</td><td></td><td></td></tr><tr><td>p</td><td>void *</td><td>integer</td><td></td><td>(5)(3)</td></tr></tbody></table><ul><li><code>struct.pack()</code></li><li><code>struct.unpack()</code></li></ul><p><code>.pack()</code>和<code>.unpack()</code>的参数一样：</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">struct.pack(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;i&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1111111111111</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># struct.error: &#39;i&#39; format requires -2147483648 &lt;= number &lt;= 2147483647 #这个是范围</span></span></code></pre></div><p><code>.unpack()</code>将返回一个元组。</p><h4 id="使用-struct-自制报头" tabindex="-1">使用 struct 自制报头 <a class="header-anchor" href="#使用-struct-自制报头" aria-label="Permalink to &quot;使用 struct 自制报头&quot;">​</a></h4><p>以远程终端功能（雾）为例：</p><p>服务端（自定制报头）</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> socket, struct, os, subprocess</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">s </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> socket.socket(socket.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AF_INET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, socket.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SOCK_STREAM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">s.setsockopt(socket.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SOL_SOCKET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, socket.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SO_REUSEADDR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">s.bind((</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;127.0.0.1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8080</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">s.listen()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">conn, addr </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> s.accept()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">while</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    cmd </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> conn.recv(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1024</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    cd </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cmd.split(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">b</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;cd &quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> len</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(cd) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        os.chdir(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(cd[</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">].strip(), </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;utf-8&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;cmd: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">%s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> %</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cmd)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    res </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> subprocess.Popen(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        cmd.decode(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;utf-8&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">shell</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">stdout</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">subprocess.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">PIPE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">stderr</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">subprocess.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">PIPE</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    back_msg </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> res.stderr.read() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">or</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> res.stdout.read()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    conn.send(struct.pack(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;i&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">len</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(back_msg)))  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 先发报头：back_msg的长度</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    conn.sendall(back_msg)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 再发真实的内容</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">conn.close()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">s.close()</span></span></code></pre></div><p>客户端（自定制报头）</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> socket, struct</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">s </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> socket.socket(socket.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AF_INET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, socket.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SOCK_STREAM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">res </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> s.connect_ex((</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;127.0.0.1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8080</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">res </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">and</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(res)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">while</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    msg </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> input</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&gt;&gt;&gt; &quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).strip()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> len</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(msg) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        continue</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> msg </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;:q&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        break</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    s.send(msg.encode(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;utf-8&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    data_len </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> struct.unpack(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;i&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, s.recv(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 接收报头</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    now_len </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    all_data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> b</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> now_len </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> data_len:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        now_data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> s.recv(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1024</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        all_data </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> now_data</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        now_len </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> len</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(now_data)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(all_data.decode(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;gbk&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># windows默认gbk编码</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">s.close()</span></span></code></pre></div><p>自此，黏包问题被完美解决。事实上，应用层的协议（FTP 等）本质上就是定制的稍微复杂一点的报头。</p></div></div></main><footer class="VPDocFooter" data-v-4c7315e0 data-v-cde799f2><!--[--><!--]--><div class="edit-info" data-v-cde799f2><!----><div class="last-updated" data-v-cde799f2><p class="VPLastUpdated" data-v-cde799f2 data-v-982dd880>Last updated: <time datetime="2024-12-19T14:45:41.000Z" data-v-982dd880></time></p></div></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-cde799f2><span class="visually-hidden" id="doc-footer-aria-label" data-v-cde799f2>Pager</span><div class="pager" data-v-cde799f2><a class="VPLink link pager-link prev" href="/notebook/python/5-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/26-%E7%B3%BB%E7%BB%9F%E6%9C%89%E5%85%B3%E6%A8%A1%E5%9D%97.html" data-v-cde799f2><!--[--><span class="desc" data-v-cde799f2>Previous page</span><span class="title" data-v-cde799f2>𝟸𝟼﹒系统有关模块</span><!--]--></a></div><div class="pager" data-v-cde799f2><a class="VPLink link pager-link next" href="/notebook/python/5-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/28-%E8%BF%9B%E7%A8%8B.html" data-v-cde799f2><!--[--><span class="desc" data-v-cde799f2>Next page</span><span class="title" data-v-cde799f2>𝟸𝟾﹒进程</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"index.md\":\"CLFSDZOT\",\"javascript_0-起步_1-初识javascript.md\":\"Cq8NmS56\",\"javascript_0-起步_2-数据类型伊始.md\":\"DDhnQvWk\",\"javascript_0-起步_3-函数和对象属性.md\":\"DtLvoybH\",\"javascript_0-起步_4-流程控制.md\":\"OEv_VWj9\",\"javascript_0-起步_5-运算符和类型转换.md\":\"drzfTjk6\",\"javascript_1-函数和作用域_10-函数的高级用法.md\":\"CMpwxOqy\",\"javascript_1-函数和作用域_6-作用域和闭包.md\":\"nN0AFzLJ\",\"javascript_1-函数和作用域_7-js变量提升.md\":\"-7h9XtbT\",\"javascript_1-函数和作用域_8-函数的基本用法.md\":\"CpfS2KNa\",\"javascript_1-函数和作用域_9-定时器与异步.md\":\"BCHD1nAP\",\"javascript_2-对象和方法_11-字符串和数组.md\":\"D9ndE1Uu\",\"javascript_2-对象和方法_12-解构赋值和序列化.md\":\"iu_hk2R7\",\"javascript_2-对象和方法_13-数学和日期对象.md\":\"Dh_mEAKz\",\"javascript_2-对象和方法_14-对象方法扩展.md\":\"Du-_QPZN\",\"javascript_2-对象和方法_15-正则对象.md\":\"BKijWu_L\",\"javascript_2-对象和方法_16-面向对象.md\":\"COUQhEX_\",\"javascript_3-现代语法规范_17-新增数据类型.md\":\"Du9Wr77i\",\"javascript_3-现代语法规范_18-描述符和代理类.md\":\"CAzGnKvW\",\"javascript_3-现代语法规范_19-ts以及实验性语法.md\":\"C3kkEhue\",\"javascript_3-现代语法规范_20-惰性函数和promise.md\":\"D5a6XJ-7\",\"javascript_3-现代语法规范_21-async和await.md\":\"B4teSZNm\",\"javascript_4-作为浏览器脚本_22-dom对象.md\":\"CzsOMNBV\",\"javascript_4-作为浏览器脚本_23-dom事件.md\":\"C2cVPttk\",\"javascript_4-作为浏览器脚本_24-bom相关.md\":\"CdDk8s7Q\",\"javascript_4-作为浏览器脚本_25-常用webapi.md\":\"z2YRNpCM\",\"javascript_4-作为浏览器脚本_26-前后端交互.md\":\"BIdh2r-8\",\"javascript_5-作为服务端脚本_27-nodejs.md\":\"D6l3Ghjt\",\"javascript_5-作为服务端脚本_28-mongodb.md\":\"CjprEOYs\",\"javascript_5-作为服务端脚本_29-koa2.md\":\"D_xBumw1\",\"javascript_5-作为服务端脚本_30-构建工具.md\":\"tCKHOTS6\",\"javascript_5-作为服务端脚本_31-客户端构建.md\":\"DUOWoqzl\",\"javascript_index.md\":\"BC4usTbg\",\"python_0-起步_1-初识python.md\":\"Ca5kdrkZ\",\"python_0-起步_2-流程控制.md\":\"BHJP7UTb\",\"python_0-起步_3-异常处理.md\":\"jX6nX_aM\",\"python_1-数据类型_4-数字和字符串.md\":\"dWkhv3xj\",\"python_1-数据类型_5-列表和元组.md\":\"DQqj9ypG\",\"python_1-数据类型_6-字典和集合.md\":\"CyHilZlG\",\"python_1-数据类型_7-字符串格式化.md\":\"DUfIbG-r\",\"python_1-数据类型_8-三目和推导式.md\":\"xpjdYIQw\",\"python_1-数据类型_9-数据类型拓展.md\":\"CaRLiH_R\",\"python_2-函数_10-文件处理.md\":\"DjBFRqhO\",\"python_2-函数_11-日志处理.md\":\"XKvjEXaR\",\"python_2-函数_12-内置函数.md\":\"DCm-H33s\",\"python_2-函数_13-闭包和装饰器.md\":\"Cg4JuX1O\",\"python_2-函数_14-递归和深拷贝.md\":\"BzQTzzd6\",\"python_2-函数_15-迭代器和生成器.md\":\"CV7G-UVx\",\"python_3-面向对象_16-类和对象.md\":\"nGV2KDvP\",\"python_3-面向对象_17-封装和继承.md\":\"rC-WglKQ\",\"python_3-面向对象_18-魔术方法.md\":\"CjkRLuJX\",\"python_3-面向对象_19-多态和泛型.md\":\"1j20eJiD\",\"python_3-面向对象_20-模块和包.md\":\"DQ2nI_Y9\",\"python_4-常用模块_21-加密有关模块.md\":\"DAvInL4p\",\"python_4-常用模块_22-序列化有关模块.md\":\"BDUrJBrR\",\"python_4-常用模块_23-正则有关模块.md\":\"CP54TFu8\",\"python_4-常用模块_24-时间有关模块.md\":\"ClAQw6xf\",\"python_4-常用模块_25-数学有关模块.md\":\"ec_Nej-i\",\"python_5-并发编程_26-系统有关模块.md\":\"rGC-b-QF\",\"python_5-并发编程_27-套接字socket.md\":\"s_W_qZIz\",\"python_5-并发编程_28-进程.md\":\"DX_lFyWU\",\"python_5-并发编程_29-线程.md\":\"D03JLJKc\",\"python_5-并发编程_30-协程.md\":\"BpN9ksUB\",\"python_6-web相关_31-sql和orm.md\":\"CgFqQgQJ\",\"python_6-web相关_32-fastapi.md\":\"DxN0nulR\",\"python_index.md\":\"xG-4djdr\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"zh-CN\",\"dir\":\"ltr\",\"title\":\"notebook\",\"description\":\"A VitePress site\",\"base\":\"/notebook/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"logo\":\"/favicon.png\",\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/nanarino\"},{\"icon\":\"twitter\",\"link\":\"https://twitter.com/kogawananari\"}],\"nav\":[{\"text\":\"JavaScript\",\"link\":\"/javascript/\",\"activeMatch\":\"/javascript/\"},{\"text\":\"Python\",\"link\":\"/python/\",\"activeMatch\":\"/python/\"}],\"sidebar\":{\"/python/\":[{\"text\":\"起步\",\"items\":[{\"text\":\"𝟶﹒准备环境\",\"link\":\"/python/\",\"index\":0},{\"text\":\"𝟷﹒初识python\",\"link\":\"/python/0-起步/1-初识python.md\",\"index\":1},{\"text\":\"𝟸﹒流程控制\",\"link\":\"/python/0-起步/2-流程控制.md\",\"index\":2},{\"text\":\"𝟹﹒异常处理\",\"link\":\"/python/0-起步/3-异常处理.md\",\"index\":3}]},{\"text\":\"数据类型\",\"items\":[{\"text\":\"𝟺﹒数字和字符串\",\"link\":\"/python/1-数据类型/4-数字和字符串.md\",\"index\":4},{\"text\":\"𝟻﹒列表和元组\",\"link\":\"/python/1-数据类型/5-列表和元组.md\",\"index\":5},{\"text\":\"𝟼﹒字典和集合\",\"link\":\"/python/1-数据类型/6-字典和集合.md\",\"index\":6},{\"text\":\"𝟽﹒字符串格式化\",\"link\":\"/python/1-数据类型/7-字符串格式化.md\",\"index\":7},{\"text\":\"𝟾﹒三目和推导式\",\"link\":\"/python/1-数据类型/8-三目和推导式.md\",\"index\":8},{\"text\":\"𝟿﹒数据类型拓展\",\"link\":\"/python/1-数据类型/9-数据类型拓展.md\",\"index\":9}]},{\"text\":\"函数\",\"items\":[{\"text\":\"𝟷𝟶﹒文件处理\",\"link\":\"/python/2-函数/10-文件处理.md\",\"index\":10},{\"text\":\"𝟷𝟷﹒日志处理\",\"link\":\"/python/2-函数/11-日志处理.md\",\"index\":11},{\"text\":\"𝟷𝟸﹒内置函数\",\"link\":\"/python/2-函数/12-内置函数.md\",\"index\":12},{\"text\":\"𝟷𝟹﹒闭包和装饰器\",\"link\":\"/python/2-函数/13-闭包和装饰器.md\",\"index\":13},{\"text\":\"𝟷𝟺﹒递归和深拷贝\",\"link\":\"/python/2-函数/14-递归和深拷贝.md\",\"index\":14},{\"text\":\"𝟷𝟻﹒迭代器和生成器\",\"link\":\"/python/2-函数/15-迭代器和生成器.md\",\"index\":15}]},{\"text\":\"面向对象\",\"items\":[{\"text\":\"𝟷𝟼﹒类和对象\",\"link\":\"/python/3-面向对象/16-类和对象.md\",\"index\":16},{\"text\":\"𝟷𝟽﹒封装和继承\",\"link\":\"/python/3-面向对象/17-封装和继承.md\",\"index\":17},{\"text\":\"𝟷𝟾﹒魔术方法\",\"link\":\"/python/3-面向对象/18-魔术方法.md\",\"index\":18},{\"text\":\"𝟷𝟿﹒多态和泛型\",\"link\":\"/python/3-面向对象/19-多态和泛型.md\",\"index\":19},{\"text\":\"𝟸𝟶﹒模块和包\",\"link\":\"/python/3-面向对象/20-模块和包.md\",\"index\":20}]},{\"text\":\"常用模块\",\"items\":[{\"text\":\"𝟸𝟷﹒加密有关模块\",\"link\":\"/python/4-常用模块/21-加密有关模块.md\",\"index\":21},{\"text\":\"𝟸𝟸﹒序列化有关模块\",\"link\":\"/python/4-常用模块/22-序列化有关模块.md\",\"index\":22},{\"text\":\"𝟸𝟹﹒正则有关模块\",\"link\":\"/python/4-常用模块/23-正则有关模块.md\",\"index\":23},{\"text\":\"𝟸𝟺﹒时间有关模块\",\"link\":\"/python/4-常用模块/24-时间有关模块.md\",\"index\":24},{\"text\":\"𝟸𝟻﹒数学有关模块\",\"link\":\"/python/4-常用模块/25-数学有关模块.md\",\"index\":25}]},{\"text\":\"并发编程\",\"items\":[{\"text\":\"𝟸𝟼﹒系统有关模块\",\"link\":\"/python/5-并发编程/26-系统有关模块.md\",\"index\":26},{\"text\":\"𝟸𝟽﹒套接字socket\",\"link\":\"/python/5-并发编程/27-套接字socket.md\",\"index\":27},{\"text\":\"𝟸𝟾﹒进程\",\"link\":\"/python/5-并发编程/28-进程.md\",\"index\":28},{\"text\":\"𝟸𝟿﹒线程\",\"link\":\"/python/5-并发编程/29-线程.md\",\"index\":29},{\"text\":\"𝟹𝟶﹒协程\",\"link\":\"/python/5-并发编程/30-协程.md\",\"index\":30}]},{\"text\":\"WEB相关\",\"items\":[{\"text\":\"𝟹𝟷﹒SQL和ORM\",\"link\":\"/python/6-WEB相关/31-SQL和ORM.md\",\"index\":31},{\"text\":\"𝟹𝟸﹒FastAPI\",\"link\":\"/python/6-WEB相关/32-FastAPI.md\",\"index\":32}]},null],\"/javascript/\":[{\"text\":\"起步\",\"items\":[{\"text\":\"𝟶﹒准备环境\",\"link\":\"/javascript/\",\"index\":0},{\"text\":\"𝟷﹒初识javascript\",\"link\":\"/javascript/0-起步/1-初识javascript.md\",\"index\":1},{\"text\":\"𝟸﹒数据类型伊始\",\"link\":\"/javascript/0-起步/2-数据类型伊始.md\",\"index\":2},{\"text\":\"𝟹﹒函数和对象属性\",\"link\":\"/javascript/0-起步/3-函数和对象属性.md\",\"index\":3},{\"text\":\"𝟺﹒流程控制\",\"link\":\"/javascript/0-起步/4-流程控制.md\",\"index\":4},{\"text\":\"𝟻﹒运算符和类型转换\",\"link\":\"/javascript/0-起步/5-运算符和类型转换.md\",\"index\":5}]},{\"text\":\"函数和作用域\",\"items\":[{\"text\":\"𝟼﹒作用域和闭包\",\"link\":\"/javascript/1-函数和作用域/6-作用域和闭包.md\",\"index\":6},{\"text\":\"𝟽﹒js变量提升\",\"link\":\"/javascript/1-函数和作用域/7-js变量提升.md\",\"index\":7},{\"text\":\"𝟾﹒函数的基本用法\",\"link\":\"/javascript/1-函数和作用域/8-函数的基本用法.md\",\"index\":8},{\"text\":\"𝟿﹒定时器与异步\",\"link\":\"/javascript/1-函数和作用域/9-定时器与异步.md\",\"index\":9},{\"text\":\"𝟷𝟶﹒函数的高级用法\",\"link\":\"/javascript/1-函数和作用域/10-函数的高级用法.md\",\"index\":10}]},{\"text\":\"对象和方法\",\"items\":[{\"text\":\"𝟷𝟷﹒字符串和数组\",\"link\":\"/javascript/2-对象和方法/11-字符串和数组.md\",\"index\":11},{\"text\":\"𝟷𝟸﹒解构赋值和序列化\",\"link\":\"/javascript/2-对象和方法/12-解构赋值和序列化.md\",\"index\":12},{\"text\":\"𝟷𝟹﹒数学和日期对象\",\"link\":\"/javascript/2-对象和方法/13-数学和日期对象.md\",\"index\":13},{\"text\":\"𝟷𝟺﹒对象方法扩展\",\"link\":\"/javascript/2-对象和方法/14-对象方法扩展.md\",\"index\":14},{\"text\":\"𝟷𝟻﹒正则对象\",\"link\":\"/javascript/2-对象和方法/15-正则对象.md\",\"index\":15},{\"text\":\"𝟷𝟼﹒面向对象\",\"link\":\"/javascript/2-对象和方法/16-面向对象.md\",\"index\":16}]},{\"text\":\"现代语法规范\",\"items\":[{\"text\":\"𝟷𝟽﹒新增数据类型\",\"link\":\"/javascript/3-现代语法规范/17-新增数据类型.md\",\"index\":17},{\"text\":\"𝟷𝟾﹒描述符和代理类\",\"link\":\"/javascript/3-现代语法规范/18-描述符和代理类.md\",\"index\":18},{\"text\":\"𝟷𝟿﹒TS以及实验性语法\",\"link\":\"/javascript/3-现代语法规范/19-TS以及实验性语法.md\",\"index\":19},{\"text\":\"𝟸𝟶﹒惰性函数和Promise\",\"link\":\"/javascript/3-现代语法规范/20-惰性函数和Promise.md\",\"index\":20},{\"text\":\"𝟸𝟷﹒async和await\",\"link\":\"/javascript/3-现代语法规范/21-async和await.md\",\"index\":21}]},{\"text\":\"作为浏览器脚本\",\"items\":[{\"text\":\"𝟸𝟸﹒DOM对象\",\"link\":\"/javascript/4-作为浏览器脚本/22-DOM对象.md\",\"index\":22},{\"text\":\"𝟸𝟹﹒DOM事件\",\"link\":\"/javascript/4-作为浏览器脚本/23-DOM事件.md\",\"index\":23},{\"text\":\"𝟸𝟺﹒BOM相关\",\"link\":\"/javascript/4-作为浏览器脚本/24-BOM相关.md\",\"index\":24},{\"text\":\"𝟸𝟻﹒常用WebAPI\",\"link\":\"/javascript/4-作为浏览器脚本/25-常用WebAPI.md\",\"index\":25},{\"text\":\"𝟸𝟼﹒前后端交互\",\"link\":\"/javascript/4-作为浏览器脚本/26-前后端交互.md\",\"index\":26}]},{\"text\":\"作为服务端脚本\",\"items\":[{\"text\":\"𝟸𝟽﹒nodejs\",\"link\":\"/javascript/5-作为服务端脚本/27-nodejs.md\",\"index\":27},{\"text\":\"𝟸𝟾﹒mongodb\",\"link\":\"/javascript/5-作为服务端脚本/28-mongodb.md\",\"index\":28},{\"text\":\"𝟸𝟿﹒Koa2\",\"link\":\"/javascript/5-作为服务端脚本/29-Koa2.md\",\"index\":29},{\"text\":\"𝟹𝟶﹒构建工具\",\"link\":\"/javascript/5-作为服务端脚本/30-构建工具.md\",\"index\":30},{\"text\":\"𝟹𝟷﹒客户端构建\",\"link\":\"/javascript/5-作为服务端脚本/31-客户端构建.md\",\"index\":31}]},null]}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>